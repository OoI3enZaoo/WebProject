<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="icon" type="image/png" href="assets/img/favicon.ico">
	

	<title>Light Bootstrap Dashboard by Creative Tim</title>



<!--   Core JS Files   -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


       <!-- Bootstrap core CSS     -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Animation library for notifications   -->
    <link href="bower_components/bootstrap/dist/css/animate.min.css" rel="stylesheet"/>


<!--  Light Bootstrap Table core CSS    -->
    <link href="bower_components/bootstrap/dist/css/light-bootstrap-dashboard.css" rel="stylesheet"/>
    
  
      <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="bower_components/other/css/demo.css" rel="stylesheet" />



<!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
    <link href="bower_components/font/css/pe-icon-7-stroke.css" rel="stylesheet" />

     <!--  Google Map Plugin -->
   <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWgbWYxPgHHo-PU4IuhjjZhjh1PXfhYkc&callback=initMap"
  type="text/javascript"></script>
  
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">  
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  
  
  
</head>
<body>

	





<div class="wrapper">
    <div class="sidebar" data-color="blue" data-image="bower_components/font/img/sidebar-5.jpg">


    	<div class="sidebar-wrapper">
            <div class="logo">
                <a href="index.html" class="simple-text">
                    Home Page
                </a>
            </div>

            <ul class="nav">
                <li>
                    <a href="dashboard.html">
                        <i class="pe-7s-graph"></i>
                        <p>Dashboard</p>
                    </a>
                </li>

                <li >
                    <a href="airpollution.html">
                        <i class="pe-7s-compass"></i>
                        <p>Air pollution</p>
                    </a>
                </li>


                 <li class="active">
                    <a href="history.html">
                        <i class="pe-7s-back"></i>
                        <p>History</p>
                    </a>
                </li>
                
                <li>
                    <a href="aqi.html">
                        <i class="pe-7s-display1"></i>
                        <p>Air Quality Index </p>
                    </a>
                </li>


            </ul>

    	</div>
    </div>
    

    <div class="main-panel">
        <nav class="navbar navbar-default navbar-fixed">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">History</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-left">
                     

                         <li class="dropdown">
                              <a class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="fa fa-globe"></i>
                                    <b class="caret"></b>
                                    <span class="notification">5</span>
                              </a>
                              <ul class="dropdown-menu">
                              
                                <li><a href="#">Notification 1</a></li>
                                <li><a href="#">Notification 2</a></li>
                                <li><a href="#">Notification 3</a></li>
                                <li><a href="#">Notification 4</a></li>
                                <li><a href="#">Another notification</a></li>
                              </ul>
                        </li>


                    </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                           <a href="">
                               Account
                            </a>
                        </li>


                    </ul>
                </div>
            </div>
                                              
        </nav>

<div class="content">
            <div class="container-fluid">
                <div class="card">                
                  <div class="places-buttons">
                            <div class="row">
                            <br>                          
                                <div class="col-md-6 col-md-offset-3 text-center">                                
                                    <h4 class ="title">Search History of Air Pollution
                                        <p class="category">Search History of Air Pollution whatever you want</p>
                                    </h4>
                                </div>
                            </div>                                                                                                    
                    </div>
                    
                    <div class="header">
                        <h5>Pick a Date</h4>
                        	
                          		<input id = "txtDate"type='text' class="form-control" id='dp1' placeHolder ="Click here" />
                          	    
                          		                   	                          	   

                    </div>
                    
                         <div class="content"> 
                    	<div class="dropdown">
								   <button id = "mTime" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Time
    								<span class="caret"></span></button>
								  <ul class="dropdown-menu">																   
								  	<li><a href="#"  data-value= "00.00">00.00</a></li>
									<li><a href="#"  data-value= "01.00">01.00</a></li>
									<li><a href="#"  data-value= "02.00">02.00</a></li>
									<li><a href="#"  data-value= "03.00">03.00</a></li>
									<li><a href="#"  data-value= "04.00">04.00</a></li>
									<li><a href="#"  data-value= "05.00">05.00</a></li>
									<li><a href="#"  data-value= "06.00">06.00</a></li>
									<li><a href="#"  data-value= "07.00">07.00</a></li>
									<li><a href="#"  data-value= "08.00">08.00</a></li>
									<li><a href="#"  data-value= "09.00">09.00</a></li>
									<li><a href="#"  data-value= "10.00">10.00</a></li>
									<li><a href="#"  data-value= "11.00">11.00</a></li>
									<li><a href="#"  data-value= "12.00">12.00</a></li>
									<li><a href="#"  data-value= "13.00">13.00</a></li>
									<li><a href="#"  data-value= "14.00">14.00</a></li>
									<li><a href="#"  data-value= "15.00">15.00</a></li>
									<li><a href="#"  data-value= "16.00">16.00</a></li>
									<li><a href="#"  data-value= "17.00">17.00</a></li>
									<li><a href="#"  data-value= "18.00">18.00</a></li>
									<li><a href="#"  data-value= "19.00">19.00</a></li>
									<li><a href="#"  data-value= "20.00">20.00</a></li>
									<li><a href="#"  data-value= "21.00">21.00</a></li>
									<li><a href="#"  data-value= "22.00">22.00</a></li>
									<li><a href="#"  data-value= "23.00">23.00</a></li>
		
								  </ul>
								</div>    
								</div>
                    
                    
                    <div class="content">                    
                        <div class="row">                                                             
                           
                            <br>                                   
                            <div class="col-md-12">
                                <button id= "DateSearch"class="btn btn-default btn-block">Search</button>
                                <!-- onclick="demo.showNotification('top','center') -->                               
                            </div>
                            
                                                       
                        </div>
                      
                      
                </div>
           
 			</div>
 			
        </div>

        
        </div>
 



   <div id="map"></div>
   
    </div>
    
    
</div>



</body>
   

 
  
  
 <script type="text/javascript">
$(function(){
	
	  $("#txtDate").datepicker();	  
	  $(".dropdown-menu li a").click(function(){
		  $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
		  $(this).parents(".dropdown").find('.btn').val($(this).data('value'));

		  
		  
	});
	  
	  
	  
		
	  
});
 

function checkTime(time){
	
	if(time == "00.00"){
		return "0";
	}
	if(time == "01.00"){
		return "1";
	}
	if(time == "02.00"){
		return "2";
	}
	if(time == "03.00"){
		return "3";
	}
	if(time == "04.00"){
		return "4";
	}
	if(time == "05.00"){
		return "5";
	}
	if(time == "06.00"){
		return "6";
	}
	if(time == "07.00"){
		return "7";
	}
	if(time == "08.00"){
		return "8";
	}
	if(time == "09.00"){
		return "9";
	}
	if(time == "10.00"){
		return "10";
	}
	if(time == "11.00"){
		return "11";
	}
	if(time == "12.00"){
		return "12";
	}
	if(time == "13.00"){
		return "13";
	}
	if(time == "14.00"){
		return "14";
	}
	if(time == "15.00"){
		return "15";
	}
	if(time == "16.00"){
		return "16";
	}
	if(time == "17.00"){
		return "17";
	}
	if(time == "18.00"){
		return "18";
	}
	if(time == "19.00"){
		return "19";
	}
	if(time == "20.00"){
		return "20";
	}
	if(time == "21.00"){
		return "21";
	}
	if(time == "22.00"){
		return "22";
	}
	if(time == "23.00"){
		return "23";
	}
	
		
}
function initMap() {
	
	$('#DateSearch').click(function(){	
				
		var mDate = document.getElementById("txtDate").value;
		var mTime = document.getElementById("mTime").value;		
		console.log('date: ' + mDate + ' mTime: ' + mTime);								
		$.getJSON('http://sysnet.utcc.ac.th/aparcas/History.jsp',function(result){
					
			var time = checkTime(mTime);
			console.log('checkTime(time): ' +time);
			for(i = 0; i< result.AQI_History.length; i++){				
															 
				 console.log('time: ' +mTime);	  				  
				if(time == "1"){
					console.log('result: ' +result.AQI_History[i].AQI0);															
				}
				else if(time == "2"){
					console.log('result2: ' +result.AQI_History[i].AQI2);					
				}			
				setCircleOnMap(result.AQI_History[i].id_district);
																
			}//for
		});//getJSON				
	});//date Click
	
	
  var myLatLng = {lat: 14.46523, lng: 100.13137};

  
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 8,
        center: myLatLng,
        mapTypeId: 'terrain'
      });   //end of map
      
  
     function setCircleOnMap(district){    
    	  
      console.log('setCircleOnMap(' + district+')');           
      var infoWindow = new google.maps.InfoWindow();

        // Initialize the first layer
        var mLayer = new google.maps.FusionTablesLayer({
          query: {
            select: 'geometry',
            from: '17Vj_x8KaduQcuxi_C0M6teVPKoId_7qQyyJC_zRs',
            where : "ID_2 = "+district
          },
          map: map,
          suppressInfoWindows: true                            
        });
        var infoWindow;
        var infoWindow = new google.maps.InfoWindow({
		     content: "<div><b>Air Pollution Report</b></div>",
		      maxWidth: 500
		}); 
        google.maps.event.addListener(mLayer, 'click', function(e) {
         // windowControl(e, infoWindow, map);
        	infoWindow.setPosition(ev.latLng);
        	infoWindow.open(map);
        });

        
        //getAQIColor
        
        
         
        
        
	     /*  var layer = new google.maps.FusionTablesLayer({
	    	  suppressInfoWindows: true,
	    	  query: {
	            select: 'geometry',
	            from: '17Vj_x8KaduQcuxi_C0M6teVPKoId_7qQyyJC_zRs',
	            where: "ID_2 = 8"
	          },
	          styles: [{
	            polygonOptions: {
	              fillColor: '#ff0000',
	              fillOpacity: 0.3,
	              
	            }
	          }
	          ]
	        });
      layer.setMap(map); 
	        
	        
	        var layer2 = new google.maps.FusionTablesLayer({
		    	  suppressInfoWindows: true,
		    	  query: {
		            select: 'geometry',
		            from: '17Vj_x8KaduQcuxi_C0M6teVPKoId_7qQyyJC_zRs',
		            where: "ID_2 = 15"
		          },
		          styles: [{
		            polygonOptions: {
		              fillColor: '#ff0000',
		              fillOpacity: 0.3,
		              
		            }
		          }
		          ]
		        });
	        	
		        layer2.setMap(map);  */
		        
		        
	        
	       
		        
	/* 	        
         var infoWindow;
        var infoWindow = new google.maps.InfoWindow({
		     content: "<div><b>Air Pollution Report</b></div>",
		      maxWidth: 500
		});   
        
        google.maps.event.addListener(layer, 'click', function(ev) {

        	infoWindow.setPosition(ev.latLng);
        	infoWindow.open(map);              	
            //alert("lat:"+ event.latLng.lat());

            }); 
         
                 */
	}
     
     
 

  // Open the info window at the clicked location
     function windowControl(e, infoWindow, map) {
       infoWindow.setOptions({
         content: e.infoWindowHtml,
         position: e.latLng,
         pixelOffset: e.pixelOffset
       });
       infoWindow.open(map);
     }

}




</script>

<script>

function getDistrictFromLatlng(lat, lng){	
 	var myLocation = [["13.736623", "100.563866"],["13.757873","100.53623"]];		
	for(i = 0; i<myLocation.length; i++){ 
		$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?latlng="+myLocation[i][0]+","+myLocation[i][1]+"&sensor=true",function(result){						
			for(j = 0; j<result.results[0].address_components.length; j++){						
				if(result.results[0].address_components[j].long_name.match(/^เขต.*$/)){									
						var myDistrict = result.results[0].address_components[j].long_name
						var mResult = myDistrict.replace("เขต ","");
						console.log(mResult);
						//return mResult;
						
				}
				
			}
		});
		                 
	}
}
                 
                 
 function getAQIColor(number){
  	
  	var color;
  	if(number > 300){
  		return  "#ff4d4d";//red
  	}
  	if(number > 201){
  		return  "#ff944d";//orange
  	}
  	if(number > 100){
  		return   "#ffff4d";//yellow
  	}
  	if(number > 51){
  		return "#4dff88"//green
  	}
  	else{
  		return  "#4d4dff";//blue
  		
  	}
  	return null;
  } 
 
</script>

    
	<script src="bower_components/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>

	<!--  Checkbox, Radio & Switch Plugins -->
  <script src="bower_components/bootstrap/dist/js/bootstrap-checkbox-radio-switch.js"></script>


    <!--  Notifications Plugin    -->
    
    <script src="bower_components/bootstrap/dist/js/bootstrap-notify.js"></script>

   

    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
	 <script src="bower_components/font/js/light-bootstrap-dashboard.js"></script>

	<!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
	<script src="bower_components/font/js/demo.js"></script>


</html>

